<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>vue2ç”Ÿå‘½å‘¨æœŸ</title>
  <script src="../../lib/vue.js"></script>
</head>

<body>
  <div id="app" v-if="showApp">
    <div ref="msg">{{msg}}</div>
    <children :title="msg" @update-title="updateTitle" v-if="show"></children>
    <button @click="showMsg">æ˜¾ç¤º</button>
    <button @click="hidden">éšè—</button>
    <button @click="hiddenApp">éšè—App</button>
  </div>

  <script>
    const children = Vue.component("children", {
      template:
        `<div>
          <div>å­ç»„ä»¶-{{title}}</div>
          <div>count: {{count}}</div>
          <button @click="updateTitle">ä¿®æ”¹title</button>
          <button @click="add">+1</button>
        </div>`,

      props: {
        title: {
          type: String,
          default: ""
        }
      }, 
      data() {
        return {
          count: 0
        }
      },

      methods: {
        add() {
          this.count++
        },

        updateTitle() {
          this.$emit("update-title", `hello world${Math.random()}`)
          console.log(123)
        }
      },

      beforeUpdate() {
        console.log("ğŸš€ ~ vue2.html ~ beforeUpdate ~ beforeUpdate:", 'å­ç»„ä»¶æ›´æ–°å‰')
      },

      updated() {
        console.log("ğŸš€ ~ vue2.html ~ updated ~ updated:", 'å­ç»„ä»¶æ›´æ–°å®Œæˆ')
      },

      beforeDestroy() {
        console.log("ğŸš€ ~ vue2.html ~ beforeDestroy:", 'å­ç»„ä»¶é”€æ¯å‰')
      },

      destroyed() {
        console.log("ğŸš€ ~ vue2.html ~ destroyed:", 'å­ç»„ä»¶é”€æ¯å®Œæˆ')
      }
    })
    const vm = new Vue({
      el: "#app",
      data() {
        return {
          msg: "hello world",
          show: true,
          showApp: true,
        }
      },

      components: {
        children
      },

      methods: {
        showMsg() {
          window.alert(this.msg)
        },

        updateTitle(msg) {
          console.log("ğŸš€ ~ vue2.html ~ updateTitle ~ msg:", msg)
          this.msg = msg
        },

        hidden() {
          this.show = false
        },

        hiddenApp() {
          this.showApp = false
        }
      },

      beforeCreate() {
        console.log("ğŸš€ ~ vue2.html ~ beforeCreate ~ beforeCreate:", 'ç»„ä»¶å®ä¾‹åˆ›å»ºå‰ï¼Œæ— æ³•è·å–åˆ°dataä¸­çš„æ•°æ®ï¼Œmethodsä¸­çš„æ–¹æ³•ï¼Œ$elå±æ€§...')
        // this.msgï¼Œ this.showMsg, this.$refs.mg è®¿é—®éƒ½ä¼šæŠ¥é”™
      },

      created() {
        console.log("ğŸš€ ~ vue2.html ~ created ~ created:", 'ç»„ä»¶åˆ›å»ºå®Œæˆï¼Œå¯ä»¥è®¿é—®dataï¼Œmethodsç­‰å±æ€§ï¼Œä½†æ˜¯å› ä¸ºè¿˜æ²¡æŒ‚è½½ï¼Œæ‰€ä»¥æ— æ³•è®¿é—®dom')
        console.log(this.msg)
        // è®¿é—®this.$refs.msgæ˜¯undefined
      },

      beforeMount() {
        console.log("ğŸš€ ~ vue2.html ~ beforeMount ~ beforeMount:", 'ç»„ä»¶æŒ‚è½½å‰ï¼Œæ­¤æ—¶å¯ä»¥è®¿é—®åˆ°dataï¼Œmethodsç­‰å±æ€§ï¼Œä½†æ˜¯å› ä¸ºè¿˜æ²¡æŒ‚è½½ï¼Œæ‰€ä»¥æ— æ³•è®¿é—®dom')
      },

      mounted() {
        console.log("ğŸš€ ~ vue2.html ~ mounted ~ mounted:", 'ç»„ä»¶æŒ‚è½½å®Œæˆï¼Œå¯ä»¥è®¿é—®domäº†')
        console.log(this.$refs.msg)
      },

      beforeUpdate() {
        console.log("ğŸš€ ~ vue2.html ~ beforeUpdate ~ beforeUpdate:", 'ç»„ä»¶æ›´æ–°å‰')
      },

      updated() {
        console.log("ğŸš€ ~ vue2.html ~ updated ~ updated:", 'ç»„ä»¶æ›´æ–°å®Œæˆ')
      },

      beforeDestroy() {
        console.log("ğŸš€ ~ vue2.html ~ beforeDestroy:", 'ç»„ä»¶é”€æ¯å‰')
      },

      destroyed() {
        console.log("ğŸš€ ~ vue2.html ~ destroyed:", 'ç»„ä»¶é”€æ¯å®Œæˆ')
      }
    })
  </script>
</body>

</html>